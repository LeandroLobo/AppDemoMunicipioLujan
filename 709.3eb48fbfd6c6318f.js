"use strict";(self.webpackChunkapp_demo_muni_lujan=self.webpackChunkapp_demo_muni_lujan||[]).push([[709],{5709:(Pa,Z,l)=>{l.r(Z),l.d(Z,{CargaSalariosModule:()=>Ta});var G=l(8177),H=l(6679),V=l(5722),C=l(6895),K=l(433),D=l(6773),T=l(805),s=l(7873),a=l(8256),W=l(3959),X=l(4094),f=l(7318),F=l(8969),_=l(5593),B=l(2453),U=l(1740),x=l(1493);const q=["dt1"];function k(i,c){if(1&i&&(a.TgZ(0,"ul")(1,"li"),a._uU(2),a.qZA()()),2&i){const t=a.oxw(2);a.xp6(2),a.AsE("",t.uploadedFile.name," - ",t.uploadedFile.size," bytes")}}function aa(i,c){1&i&&(a.TgZ(0,"span"),a._uU(1,"Busque un archivo en su dispositivo o arrastrelo dentro de este contenedor."),a.qZA())}function ta(i,c){if(1&i&&(a.YNc(0,k,3,2,"ul",15),a.YNc(1,aa,2,0,"span",15)),2&i){const t=a.oxw();a.Q6J("ngIf",t.uploadedFile),a.xp6(1),a.Q6J("ngIf",!t.uploadedFile)}}function ea(i,c){if(1&i){const t=a.EpF();a.TgZ(0,"div",16)(1,"span",17),a._UZ(2,"i",18),a.TgZ(3,"input",19),a.NdJ("input",function(r){a.CHM(t);const o=a.oxw();return a.KtG(o.applyFilterGlobal(r,"contains"))}),a.qZA()()()}}function oa(i,c){1&i&&(a.TgZ(0,"tr")(1,"th",20)(2,"div",21),a._uU(3," Fecha "),a._UZ(4,"p-sortIcon",22),a.qZA()(),a.TgZ(5,"th",23)(6,"div",21),a._uU(7," CLAE 2 "),a._UZ(8,"p-sortIcon",24),a.qZA()(),a.TgZ(9,"th",25)(10,"div",21),a._uU(11," Sector Productivo "),a._UZ(12,"p-sortIcon",26),a.qZA()(),a.TgZ(13,"th",27)(14,"div",21),a._uU(15," C\xf3digo Dpto INDEC "),a._UZ(16,"p-sortIcon",28),a.qZA()(),a.TgZ(17,"th",29)(18,"div",21),a._uU(19," Id Provincia INDEC "),a._UZ(20,"p-sortIcon",30),a.qZA()(),a.TgZ(21,"th",31)(22,"div",21),a._uU(23," Salario Promedio "),a._UZ(24,"p-sortIcon",32),a.qZA()()())}function na(i,c){if(1&i&&(a.TgZ(0,"tr")(1,"td"),a._uU(2),a.ALo(3,"date"),a.qZA(),a.TgZ(4,"td"),a._uU(5),a.qZA(),a.TgZ(6,"td"),a._uU(7),a.qZA(),a.TgZ(8,"td"),a._uU(9),a.qZA(),a.TgZ(10,"td"),a._uU(11),a.qZA(),a.TgZ(12,"td"),a._uU(13),a.qZA()()),2&i){const t=c.$implicit;a.xp6(2),a.hij(" ",a.xi3(3,6,t.fecha,"dd/MM/yyyy")," "),a.xp6(3),a.hij(" ",t.clae2," "),a.xp6(2),a.hij(" ",t.sectorProductivo," "),a.xp6(2),a.hij(" ",t.codigo_departamento_indec," "),a.xp6(2),a.hij(" ",t.id_provincia_indec," "),a.xp6(2),a.hij(" ",t.salario_promedio," ")}}function ia(i,c){1&i&&(a.TgZ(0,"tr")(1,"td",33),a._uU(2,"No se encontraron resultados."),a.qZA()())}const ra=function(){return[10,25,50]},la=function(){return["clae2","sectorProductivo","codigo_departamento_indec","fecha","id_provincia_indec","salario_promedio"]};let sa=(()=>{class i{constructor(t,n,r){this.messageService=t,this.papa=n,this.firebase=r,this.muestraTotal=[],this.loadingData=!1,this.uploadingData=!1,this.activityValues=[0,100]}ngOnInit(){this.loadingData=!0,this.firebase.obtenerDocumento("SalariosPromedio").then(t=>{if(t){const n=new Date(0);n.setUTCSeconds(t.fechaSubida.seconds),this.fechaSubida=n.toLocaleDateString("es-ES");const r=t.data;this.muestraTotal=[...r.dataTotalLujanC,...r.dataTotalLujanB,...r.dataTotalLujanA]}this.loadingData=!1}).catch(t=>{console.error(t),this.loadingData=!1})}showDialog(){this.visible=!0}applyFilterGlobal(t,n){this.dt.filterGlobal(t.target.value,n)}onUpload(t){this.loadingData=!0,this.uploadedFile=t.files[0];const n=new FileReader;n.readAsText(this.uploadedFile),n.onload=()=>{null!=n.result&&this.papa.parse(n.result.toString(),{header:!0,complete:r=>{this.muestraTotal=r.data.filter(o=>o.fecha>"2020"&&"-99"!=o.w_mean&&s.$.listaClae2Interesan.includes(Number(o.clae2))).map(o=>(o.salario_promedio=Number(o.w_mean),s.$.listaTotalIndustria.includes(Number(o.clae2))&&(o.sectorProductivo="Otros Industria"),s.$.listaAgroalimentario.includes(Number(o.clae2))&&(o.sectorProductivo="Agroalimentario"),s.$.listaContruccion.includes(Number(o.clae2))&&(o.sectorProductivo="Contruccion"),s.$.listaMetalmecanica.includes(Number(o.clae2))&&(o.sectorProductivo="Metalmec\xe1nica"),s.$.listaTextilConfecciones.includes(Number(o.clae2))&&(o.sectorProductivo="Textil Confecciones"),s.$.listaTurismo.includes(Number(o.clae2))&&(o.sectorProductivo="Turismo"),o)),this.guardarMuestras(),this.fechaSubida=new Date(Date.now()).toLocaleDateString("es-ES"),this.visible=!1,this.loadingData=!1},error:r=>{this.loadingData=!1,console.log(r)}})},this.messageService.add({severity:"info",summary:"Listo!",detail:"Archivo correctamente cargado en la aplicaci\xf3n."})}guardarMuestras(){const t=this.formatearFecha(this.muestraTotal[this.muestraTotal.length-1].fecha),n=new Date(t);n.setFullYear(n.getFullYear()-1,t.getMonth()+1,1);const r=new Date(t);r.setFullYear(r.getFullYear()-2,t.getMonth()+1,1);const o=new Date(t);o.setFullYear(o.getFullYear()-3,t.getMonth()+1,1);const u=this.muestraTotal.filter(e=>this.formatearFecha(e.fecha)>=n&&this.formatearFecha(e.fecha)<=t),g=this.muestraTotal.filter(e=>this.formatearFecha(e.fecha)>=r&&this.formatearFecha(e.fecha)<n),h=this.muestraTotal.filter(e=>this.formatearFecha(e.fecha)>=o&&this.formatearFecha(e.fecha)<r),p=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],m=[];for(let e=0;e<12;e++){const d=new Date(n.getFullYear(),n.getMonth()+e);m.push(p[d.getMonth()]+" "+d.getFullYear().toString().slice(-2))}const v=[];for(let e=0;e<12;e++){const d=new Date(r.getFullYear(),r.getMonth()+e);v.push(p[d.getMonth()]+" "+d.getFullYear().toString().slice(-2))}const P=[];for(let e=0;e<12;e++){const d=new Date(o.getFullYear(),o.getMonth()+e);P.push(p[d.getMonth()]+" "+d.getFullYear().toString().slice(-2))}const j=u.filter(e=>"6"==e.id_provincia_indec&&!s.$.listaCodigosDptoConurbano.includes(e.codigo_departamento_indec)),y=g.filter(e=>"6"==e.id_provincia_indec&&!s.$.listaCodigosDptoConurbano.includes(e.codigo_departamento_indec)),I=h.filter(e=>"6"==e.id_provincia_indec&&!s.$.listaCodigosDptoConurbano.includes(e.codigo_departamento_indec)),va=u.filter(e=>s.$.listaCodigosDptoConurbano.includes(e.codigo_departamento_indec)),Aa=g.filter(e=>s.$.listaCodigosDptoConurbano.includes(e.codigo_departamento_indec)),ba=h.filter(e=>s.$.listaCodigosDptoConurbano.includes(e.codigo_departamento_indec)),N=j.filter(e=>e.codigo_departamento_indec==s.$.codigoDptoLujan),L=y.filter(e=>e.codigo_departamento_indec==s.$.codigoDptoLujan),Y=I.filter(e=>e.codigo_departamento_indec==s.$.codigoDptoLujan),w=this.promediarMensual(u),A=this.promediarMensual(g),$=this.promediarMensual(h),Ma=this.calcularInteranual(A,w),Sa=this.calcularInteranual($,A),R=this.promediarMensual(j),b=this.promediarMensual(y),J=this.promediarMensual(I),Za=this.calcularInteranual(b,R),Da=this.calcularInteranual(J,b),z=this.promediarMensual(va),M=this.promediarMensual(Aa),E=this.promediarMensual(ba),Fa=this.calcularInteranual(M,z),_a=this.calcularInteranual(E,M),Q=this.promediarMensual(N),S=this.promediarMensual(L),O=this.promediarMensual(Y),Ba=this.calcularInteranual(S,Q),Ua=this.calcularInteranual(O,S),xa={labelsPromedio:[...P,...v,...m],labelsInteranual:[...v,...m],promedioMensualTotalPaisA:w,promedioMensualTotalPaisB:A,promedioMensualTotalPaisC:$,interanualTotalPaisA:Ma,interanualTotalPaisB:Sa,promedioMensualTotalRestoBsAsA:R,promedioMensualTotalRestoBsAsB:b,promedioMensualTotalRestoBsAsC:J,interanualTotalRestoBsAsA:Za,interanualTotalRestoBsAsB:Da,promedioMensualTotalConurbanoBsAsA:z,promedioMensualTotalConurbanoBsAsB:M,promedioMensualTotalConurbanoBsAsC:E,interanualTotalConurbanoBsAsA:Fa,interanualTotalConurbanoBsAsB:_a,promedioMensualTotalLujanA:Q,promedioMensualTotalLujanB:S,promedioMensualTotalLujanC:O,interanualTotalLujanA:Ba,interanualTotalLujanB:Ua,dataTotalLujanA:N,dataTotalLujanB:L,dataTotalLujanC:Y};this.firebase.guardarDocumento("SalariosPromedio",{fechaSubida:new Date(Date.now()),data:xa})}promediarMensual(t){let n=[],r=new Date(Date.parse(t[0].fecha)).getMonth();for(let o=0;o<12;o++){let u=0;const g=(r+o)%12,h=t.reduce((p,m)=>new Date(Date.parse(m.fecha)).getMonth()===g?(u++,p+m.salario_promedio):p,0);n.push(h/u)}return n}calcularInteranual(t,n){let r=[];for(let o=0;o<12;o++)r.push(100*(n[o]/t[o]-1));return r}formatearFecha(t){const n=t.split("-");let r=new Date;return r.setFullYear(Number(n[0]),Number(n[1])-1,1),r.setHours(0,0,0,0),r}}return i.\u0275fac=function(t){return new(t||i)(a.Y36(T.ez),a.Y36(W.N),a.Y36(X.P))},i.\u0275cmp=a.Xpm({type:i,selectors:[["ng-component"]],viewQuery:function(t,n){if(1&t&&a.Gf(q,5),2&t){let r;a.iGM(r=a.CRH())&&(n.dt=r.first)}},features:[a._Bn([T.ez])],decls:22,vars:13,consts:[[1,"card"],["target","_blank","href","https://datos.gob.ar/ca/dataset/produccion-salarios-por-departamentopartido-sector-actividad/archivo/produccion_11c0e1ac-0fb3-43eb-af35-9c7dcb5dab3a"],[1,"col-12","flex","justify-content-center"],["icon","pi pi-external-link","label","Actualizar Datos",3,"click"],["header","Carga de datos",3,"visible","visibleChange"],[1,"card","flex","justify-content-center"],[1,"flex","justify-content-center"],["name","fileuploader","url","https://www.primefaces.org/cdn/api/upload.php","accept",".csv","uploadLabel","Subir Archivo","cancelLabel","Cancelar","chooseLabel","Buscar",3,"multiple","showCancelButton","onUpload"],["pTemplate","content"],["dataKey","id","currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} resultados",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","loading","paginator","globalFilterFields"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[4,"ngIf"],[1,"flex"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",3,"input"],["pSortableColumn","fecha",2,"min-width","10rem"],[1,"flex","align-items-center"],["field","fecha"],["pSortableColumn","clae2",2,"min-width","15rem"],["field","clae2"],["pSortableColumn","sectorProductivo",2,"min-width","15rem"],["field","sectorProductivo"],["pSortableColumn","codigo_departamento_indec",2,"min-width","15rem"],["field","codigo_departamento_indec"],["pSortableColumn","id_provincia_indec",2,"min-width","15rem"],["field","id_provincia_indec"],["pSortableColumn","puestos",2,"min-width","10rem"],["field","puestos"],["colspan","7"]],template:function(t,n){1&t&&(a.TgZ(0,"div",0),a._UZ(1,"p-toast"),a.TgZ(2,"h4"),a._uU(3,"Salario promedio por departamento/partido y clae2, sector privado."),a.qZA(),a.TgZ(4,"h5")(5,"a",1),a._uU(6,"Link de descarga del dataset"),a.qZA()(),a.TgZ(7,"h5"),a._uU(8),a.qZA(),a.TgZ(9,"div",2)(10,"p-button",3),a.NdJ("click",function(){return n.showDialog()}),a.qZA()(),a.TgZ(11,"p-dialog",4),a.NdJ("visibleChange",function(o){return n.visible=o}),a.TgZ(12,"div",5)(13,"div",6)(14,"p-fileUpload",7),a.NdJ("onUpload",function(o){return n.onUpload(o)}),a.YNc(15,ta,2,2,"ng-template",8),a.qZA()()()(),a.TgZ(16,"p-table",9,10),a.YNc(18,ea,4,0,"ng-template",11),a.YNc(19,oa,25,0,"ng-template",12),a.YNc(20,na,14,9,"ng-template",13),a.YNc(21,ia,3,0,"ng-template",14),a.qZA()()),2&t&&(a.xp6(8),a.hij("Fecha \xfaltima actualizaci\xf3n: ",n.fechaSubida,""),a.xp6(3),a.Q6J("visible",n.visible),a.xp6(3),a.Q6J("multiple",!1)("showCancelButton",!1),a.xp6(2),a.Q6J("value",n.muestraTotal)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",a.DdM(11,ra))("loading",n.loadingData)("paginator",!0)("globalFilterFields",a.DdM(12,la)))},dependencies:[C.O5,f.iA,T.jx,f.lQ,f.fz,F.p,_.zx,B.FN,U.o,x.V,C.uU],encapsulation:2}),i})(),ca=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[D.Bz.forChild([{path:"",component:sa}]),D.Bz]}),i})();var ua=l(1795),da=l(1383),pa=l(6408),ma=l(3054),ga=l(666),ha=l(613),fa=l(5047),Ca=l(7932);let Ta=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[C.ez,ca,f.U$,F.O,K.u5,_.hJ,ua.T,B.EV,da.V,pa.Xt,U.j,ma.A,ga.kW,ha.cc,fa.L$,x.S,V.q4,H.W,G.JH,Ca.L]}),i})()}}]);