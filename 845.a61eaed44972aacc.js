"use strict";(self.webpackChunkapp_demo_muni_lujan=self.webpackChunkapp_demo_muni_lujan||[]).push([[845],{9845:(Ut,P,l)=>{l.r(P),l.d(P,{CargaPuestosTrabajoModule:()=>Tt});var G=l(8177),H=l(6679),V=l(5722),f=l(6895),K=l(433),Z=l(6773),T=l(805),r=l(7873),t=l(8256),W=l(3959),X=l(4094),h=l(7318),F=l(8969),B=l(5593),_=l(2453),D=l(1740),U=l(1493);const q=["dt1"];function k(s,c){if(1&s&&(t.TgZ(0,"ul")(1,"li"),t._uU(2),t.qZA()()),2&s){const a=t.oxw(2);t.xp6(2),t.AsE("",a.uploadedFile.name," - ",a.uploadedFile.size," bytes")}}function tt(s,c){1&s&&(t.TgZ(0,"span"),t._uU(1,"Busque un archivo en su dispositivo o arrastrelo dentro de este contenedor."),t.qZA())}function at(s,c){if(1&s&&(t.YNc(0,k,3,2,"ul",15),t.YNc(1,tt,2,0,"span",15)),2&s){const a=t.oxw();t.Q6J("ngIf",a.uploadedFile),t.xp6(1),t.Q6J("ngIf",!a.uploadedFile)}}function et(s,c){if(1&s){const a=t.EpF();t.TgZ(0,"div",16)(1,"span",17),t._UZ(2,"i",18),t.TgZ(3,"input",19),t.NdJ("input",function(i){t.CHM(a);const o=t.oxw();return t.KtG(o.applyFilterGlobal(i,"contains"))}),t.qZA()()()}}function ot(s,c){1&s&&(t.TgZ(0,"tr")(1,"th",20)(2,"div",21),t._uU(3," Fecha "),t._UZ(4,"p-sortIcon",22),t.qZA()(),t.TgZ(5,"th",23)(6,"div",21),t._uU(7," CLAE 2 "),t._UZ(8,"p-sortIcon",24),t.qZA()(),t.TgZ(9,"th",25)(10,"div",21),t._uU(11," Sector Productivo "),t._UZ(12,"p-sortIcon",26),t.qZA()(),t.TgZ(13,"th",27)(14,"div",21),t._uU(15," C\xf3digo Dpto INDEC "),t._UZ(16,"p-sortIcon",28),t.qZA()(),t.TgZ(17,"th",29)(18,"div",21),t._uU(19," Id Provincia INDEC "),t._UZ(20,"p-sortIcon",30),t.qZA()(),t.TgZ(21,"th",31)(22,"div",21),t._uU(23," Puestos "),t._UZ(24,"p-sortIcon",32),t.qZA()()())}function nt(s,c){if(1&s&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA()()),2&s){const a=c.$implicit;t.xp6(2),t.hij(" ",t.xi3(3,6,a.fecha,"dd/MM/yyyy")," "),t.xp6(3),t.hij(" ",a.clae2," "),t.xp6(2),t.hij(" ",a.sectorProductivo," "),t.xp6(2),t.hij(" ",a.codigo_departamento_indec," "),t.xp6(2),t.hij(" ",a.id_provincia_indec," "),t.xp6(2),t.hij(" ",a.puestos," ")}}function st(s,c){1&s&&(t.TgZ(0,"tr")(1,"td",33),t._uU(2,"No se encontraron resultados."),t.qZA()())}const it=function(){return[10,25,50]},lt=function(){return["clae2","sectorProductivo","codigo_departamento_indec","fecha","id_provincia_indec","puestos"]};let rt=(()=>{class s{constructor(a,n,i){this.messageService=a,this.papa=n,this.firebase=i,this.muestraTotal=[],this.loading=!1,this.activityValues=[0,100]}ngOnInit(){this.loading=!0,this.firebase.obtenerDocumento("PuestosTrabajoAsalariado").then(a=>{if(a){const n=new Date(0);n.setUTCSeconds(a.fechaSubida.seconds),this.fechaSubida=n.toLocaleDateString("es-ES");const i=a.data;this.muestraTotal=[...i.dataTotalLujanC,...i.dataTotalLujanB,...i.dataTotalLujanA]}this.loading=!1}).catch(a=>{console.error(a),this.loading=!1})}showDialog(){this.visible=!0}applyFilterGlobal(a,n){this.dt.filterGlobal(a.target.value,n)}onUpload(a){this.loading=!0,this.uploadedFile=a.files[0];const n=new FileReader;n.readAsText(this.uploadedFile),n.onload=()=>{null!=n.result&&this.papa.parse(n.result.toString(),{header:!0,complete:i=>{this.muestraTotal=i.data.filter(o=>o.fecha>"2020"&&"-99"!=o.puestos&&r.$.listaClae2Interesan.includes(Number(o.clae2))).map(o=>(o.puestos=Number(o.puestos),r.$.listaTotalIndustria.includes(Number(o.clae2))&&(o.sectorProductivo="Otros Industria"),r.$.listaAgroalimentario.includes(Number(o.clae2))&&(o.sectorProductivo="Agroalimentario"),r.$.listaContruccion.includes(Number(o.clae2))&&(o.sectorProductivo="Contruccion"),r.$.listaMetalmecanica.includes(Number(o.clae2))&&(o.sectorProductivo="Metalmec\xe1nica"),r.$.listaTextilConfecciones.includes(Number(o.clae2))&&(o.sectorProductivo="Textil Confecciones"),r.$.listaTurismo.includes(Number(o.clae2))&&(o.sectorProductivo="Turismo"),o)),this.guardarMuestras(),this.fechaSubida=new Date(Date.now()).toLocaleDateString("es-ES"),this.visible=!1,this.loading=!1},error:i=>{this.loading=!1,console.log(i)}})},this.messageService.add({severity:"info",summary:"Listo!",detail:"Archivo correctamente cargado en la aplicaci\xf3n."})}guardarMuestras(){const a=this.formatearFecha(this.muestraTotal[this.muestraTotal.length-1].fecha),n=new Date(a);n.setFullYear(n.getFullYear()-1,a.getMonth()+1,1);const i=new Date(a);i.setFullYear(i.getFullYear()-2,a.getMonth()+1,1);const o=new Date(a);o.setFullYear(o.getFullYear()-3,a.getMonth()+1,1);const d=this.muestraTotal.filter(e=>this.formatearFecha(e.fecha)>=n&&this.formatearFecha(e.fecha)<=a),m=this.muestraTotal.filter(e=>this.formatearFecha(e.fecha)>=i&&this.formatearFecha(e.fecha)<n),p=this.muestraTotal.filter(e=>this.formatearFecha(e.fecha)>=o&&this.formatearFecha(e.fecha)<i),g=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],C=[];for(let e=0;e<12;e++){const u=new Date(n.getFullYear(),n.getMonth()+e);C.push(g[u.getMonth()]+" "+u.getFullYear().toString().slice(-2))}const b=[];for(let e=0;e<12;e++){const u=new Date(i.getFullYear(),i.getMonth()+e);b.push(g[u.getMonth()]+" "+u.getFullYear().toString().slice(-2))}const x=[];for(let e=0;e<12;e++){const u=new Date(o.getFullYear(),o.getMonth()+e);x.push(g[u.getMonth()]+" "+u.getFullYear().toString().slice(-2))}const y=d.filter(e=>"6"==e.id_provincia_indec&&!r.$.listaCodigosDptoConurbano.includes(e.codigo_departamento_indec)),S=m.filter(e=>"6"==e.id_provincia_indec&&!r.$.listaCodigosDptoConurbano.includes(e.codigo_departamento_indec)),I=p.filter(e=>"6"==e.id_provincia_indec&&!r.$.listaCodigosDptoConurbano.includes(e.codigo_departamento_indec)),Ct=d.filter(e=>r.$.listaCodigosDptoConurbano.includes(e.codigo_departamento_indec)),bt=m.filter(e=>r.$.listaCodigosDptoConurbano.includes(e.codigo_departamento_indec)),vt=p.filter(e=>r.$.listaCodigosDptoConurbano.includes(e.codigo_departamento_indec)),N=y.filter(e=>e.codigo_departamento_indec==r.$.codigoDptoLujan),L=S.filter(e=>e.codigo_departamento_indec==r.$.codigoDptoLujan),Y=I.filter(e=>e.codigo_departamento_indec==r.$.codigoDptoLujan),w=this.contarMensual(d),v=this.contarMensual(m),$=this.contarMensual(p),At=this.calcularInteranual(v,w),Mt=this.calcularInteranual($,v),R=this.contarMensual(y),A=this.contarMensual(S),J=this.contarMensual(I),jt=this.calcularInteranual(A,R),Pt=this.calcularInteranual(J,A),z=this.contarMensual(Ct),M=this.contarMensual(bt),E=this.contarMensual(vt),Zt=this.calcularInteranual(M,z),Ft=this.calcularInteranual(E,M),Q=this.contarMensual(N),j=this.contarMensual(L),O=this.contarMensual(Y),Bt=this.calcularInteranual(j,Q),_t=this.calcularInteranual(O,j),Dt={labelsConteo:[...x,...b,...C],labelsInteranual:[...b,...C],conteoMensualTotalPaisA:w,conteoMensualTotalPaisB:v,conteoMensualTotalPaisC:$,interanualTotalPaisA:At,interanualTotalPaisB:Mt,conteoMensualTotalRestoBsAsA:R,conteoMensualTotalRestoBsAsB:A,conteoMensualTotalRestoBsAsC:J,interanualTotalRestoBsAsA:jt,interanualTotalRestoBsAsB:Pt,conteoMensualTotalConurbanoBsAsA:z,conteoMensualTotalConurbanoBsAsB:M,conteoMensualTotalConurbanoBsAsC:E,interanualTotalConurbanoBsAsA:Zt,interanualTotalConurbanoBsAsB:Ft,conteoMensualTotalLujanA:Q,conteoMensualTotalLujanB:j,conteoMensualTotalLujanC:O,interanualTotalLujanA:Bt,interanualTotalLujanB:_t,dataTotalLujanA:N,dataTotalLujanB:L,dataTotalLujanC:Y};this.firebase.guardarDocumento("PuestosTrabajoAsalariado",{fechaSubida:new Date(Date.now()),data:Dt})}contarMensual(a){let n=[],i=new Date(Date.parse(a[0].fecha)).getMonth();for(let o=0;o<12;o++){const d=(i+o)%12,m=a.reduce((p,g)=>new Date(Date.parse(g.fecha)).getMonth()===d?p+g.puestos:p,0);n.push(m/1e3)}return n}calcularInteranual(a,n){let i=[];for(let o=0;o<12;o++)i.push(100*(n[o]/a[o]-1));return i}formatearFecha(a){const n=a.split("-");let i=new Date;return i.setFullYear(Number(n[0]),Number(n[1])-1,1),i.setHours(0,0,0,0),i}}return s.\u0275fac=function(a){return new(a||s)(t.Y36(T.ez),t.Y36(W.N),t.Y36(X.P))},s.\u0275cmp=t.Xpm({type:s,selectors:[["ng-component"]],viewQuery:function(a,n){if(1&a&&t.Gf(q,5),2&a){let i;t.iGM(i=t.CRH())&&(n.dt=i.first)}},features:[t._Bn([T.ez])],decls:22,vars:13,consts:[[1,"card"],["target","_blank","href","https://datos.produccion.gob.ar/dataset/puestos-de-trabajo-por-departamento-partido-y-sector-de-actividad/archivo/169245ff-f050-4601-9cea-aa36ef2d7f20"],[1,"col-12","flex","justify-content-center"],["icon","pi pi-external-link","label","Actualizar Datos",3,"click"],["header","Carga de datos",3,"visible","visibleChange"],[1,"card","flex","justify-content-center"],[1,"flex","justify-content-center"],["name","fileuploader","url","https://www.primefaces.org/cdn/api/upload.php","accept",".csv","uploadLabel","Subir Archivo","cancelLabel","Cancelar","chooseLabel","Buscar",3,"multiple","showCancelButton","onUpload"],["pTemplate","content"],["dataKey","id","currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} resultados",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","loading","paginator","globalFilterFields"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[4,"ngIf"],[1,"flex"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",3,"input"],["pSortableColumn","fecha",2,"min-width","10rem"],[1,"flex","align-items-center"],["field","fecha"],["pSortableColumn","clae2",2,"min-width","15rem"],["field","clae2"],["pSortableColumn","sectorProductivo",2,"min-width","15rem"],["field","sectorProductivo"],["pSortableColumn","codigo_departamento_indec",2,"min-width","15rem"],["field","codigo_departamento_indec"],["pSortableColumn","id_provincia_indec",2,"min-width","15rem"],["field","id_provincia_indec"],["pSortableColumn","puestos",2,"min-width","10rem"],["field","puestos"],["colspan","7"]],template:function(a,n){1&a&&(t.TgZ(0,"div",0),t._UZ(1,"p-toast"),t.TgZ(2,"h4"),t._uU(3,"Puestos de trabajo asalariados registrados por departamento/partido y clae 2, sector privado."),t.qZA(),t.TgZ(4,"h5")(5,"a",1),t._uU(6,"Link de descarga del dataset"),t.qZA()(),t.TgZ(7,"h5"),t._uU(8),t.qZA(),t.TgZ(9,"div",2)(10,"p-button",3),t.NdJ("click",function(){return n.showDialog()}),t.qZA()(),t.TgZ(11,"p-dialog",4),t.NdJ("visibleChange",function(o){return n.visible=o}),t.TgZ(12,"div",5)(13,"div",6)(14,"p-fileUpload",7),t.NdJ("onUpload",function(o){return n.onUpload(o)}),t.YNc(15,at,2,2,"ng-template",8),t.qZA()()()(),t.TgZ(16,"p-table",9,10),t.YNc(18,et,4,0,"ng-template",11),t.YNc(19,ot,25,0,"ng-template",12),t.YNc(20,nt,14,9,"ng-template",13),t.YNc(21,st,3,0,"ng-template",14),t.qZA()()),2&a&&(t.xp6(8),t.hij("Fecha \xfaltima actualizaci\xf3n: ",n.fechaSubida,""),t.xp6(3),t.Q6J("visible",n.visible),t.xp6(3),t.Q6J("multiple",!1)("showCancelButton",!1),t.xp6(2),t.Q6J("value",n.muestraTotal)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(11,it))("loading",n.loading)("paginator",!0)("globalFilterFields",t.DdM(12,lt)))},dependencies:[f.O5,h.iA,T.jx,h.lQ,h.fz,F.p,B.zx,_.FN,D.o,U.V,f.uU],encapsulation:2}),s})(),ct=(()=>{class s{}return s.\u0275fac=function(a){return new(a||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[Z.Bz.forChild([{path:"",component:rt}]),Z.Bz]}),s})();var ut=l(1795),dt=l(1383),pt=l(6408),gt=l(3054),mt=l(666),ht=l(613),ft=l(5047);let Tt=(()=>{class s{}return s.\u0275fac=function(a){return new(a||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[f.ez,ct,h.U$,F.O,K.u5,B.hJ,ut.T,_.EV,dt.V,pt.Xt,D.j,gt.A,mt.kW,ht.cc,ft.L$,U.S,V.q4,H.W,G.JH]}),s})()}}]);